@if (dataService.game(); as game) {
	<ion-header>
	  <ion-toolbar color="primary">
		<ion-breadcrumbs>
		  <ion-breadcrumb routerLink="/home/games">Games</ion-breadcrumb>
		  <ion-breadcrumb>Gamecast: {{ game.homeTeam.teamName }} VS {{ game.awayTeam.teamName }} ({{game.homeTeam.isMale ? 'Mens' : 'Womens'}})</ion-breadcrumb>
		</ion-breadcrumbs>
		<ion-buttons slot="end">
			<ion-button (click)="dataService.removeLastPlay()">
				<ion-icon slot="icon-only" name="arrow-undo"></ion-icon>
			</ion-button>
			<ion-button id="liveStatsModal">
				<ion-icon slot="icon-only" name="stats-chart"></ion-icon>
			</ion-button>
			<ion-button id="detailModal">
				<ion-icon slot="icon-only" name="settings"></ion-icon>
			</ion-button>
			<ion-button id="color-trigger">
				<ion-icon slot="icon-only" name="brush"></ion-icon>
			</ion-button>
			<ion-button id="logsButton">
				<ion-icon name="help" slot="icon-only"></ion-icon>
			</ion-button>
			<ion-popover trigger="logsButton" #popover>
				<ng-template>
					<ion-content class="ion-padding">
						<ion-label>If you're experiencing issues, send the games error logs to the server.</ion-label>
						<ion-button expand="block" (click)="sendLogs(popover)">
							@if (sendingLogs) {
								<ion-spinner name="dots"></ion-spinner>
							} @else {
								Send logs to server
							}
						</ion-button>
					</ion-content>
				</ng-template>
			</ion-popover>
			@if (game.complete) {
				<ion-button fill="solid" color="success" (click)='dataService.toggleGameComplete()'>Complete</ion-button>
			} @else {
				<ion-button fill="solid" color="warning" (click)='dataService.toggleGameComplete()'>Live</ion-button>
			}
		</ion-buttons>
	  </ion-toolbar>
	</ion-header>

	<ion-content class="ion-no-padding" color="light">
		<ion-grid style="height: 100%; width: 100%">
			<ion-row>
				<ion-col class="ion-no-padding ion-text-center" size="1">
					@for (player of dataService.homeTeamPlayers(); track player.id) {
						@if (!dataService.hiddenPlayerIds().includes(player.id) && player.number != -1) {
							<ion-button
								[fill]="dataService.homePlayersOnCourt().includes(player) ? 'outline' : 'clear'"
								id="context-menu-trigger{{$index}}"
								color="{{homeColor()}}"
								(click)="addToCourt('home', player)">
								{{player.number}}
							</ion-button>
							<ion-popover trigger="context-menu-trigger{{$index}}" [showBackdrop]="false" triggerAction="context-menu">
								<ng-template>
									<app-edit-player color="{{homeColor()}}" [player]="player" (savePlayer)="dataService.updatePlayer(player)"></app-edit-player>
								</ng-template>
							</ion-popover>
						}
					}
				</ion-col>
				<ion-col class="ion-no-padding" size="10">
					<ion-grid class="ion-no-padding">
						<ion-row>
							<ion-col class="ion-no-padding">
								<ion-grid>
									<ion-row>
										<ion-col>
											<ion-grid style="background-color: #eaeaea; border-radius: 5px; width: 100%; padding: 5px;">
												<ion-row>
													@for (player of dataService.homePlayersOnCourt(); track player.id) {
														<ion-col id="context-menu-trigger-homeCourt{{$index}}">
															@if (player.number == -1) {
																<ion-button
																	style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
																	[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
																	color="{{homeColor()}}"
																	fill="clear"
																	shape="round"
																	expand="block"
																	(tap)="selectPlayer('home', player.id)">
																	<ion-label>T</ion-label>
																</ion-button>
															} @else {
																<ion-button
																	style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
																	[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
																	color="{{homeColor()}}"
																	fill="clear"
																	shape="round"
																	expand="block"
																	(tap)="selectPlayer('home', player.id)"
																	(doubleTap)="removeFromCourt(player)">
																	<ion-label>{{player.number}}</ion-label>
																</ion-button>
															}
														</ion-col>
													}
												</ion-row>
											</ion-grid>
											<ion-card>
												<ion-card-header>
													<ion-card-title color="{{homeColor()}}" class="ion-text-center">
														{{ game.homeTeam.teamName }}
													</ion-card-title>
													<ion-label class="ion-margin-top ion-text-center">
														<ion-button id="editHomePeriod" fill="clear" color="{{homeColor()}}" class="team-score digital-number">{{ game.homeFinal }}</ion-button>
														<div class="home-font">
															<div class="input-div">
																<div class="input">
																	<ion-label class="input-label" for="homeCurrentFouls" color="{{homeColor()}}">Fouls:</ion-label>
																	<ion-input
																		class="input-box"
																		color="{{homeColor()}}"
																		type="number"
																		id="homeCurrentFouls"
																		(ionChange)="updateGame()"
																		[placeholder]="0"
																		[(ngModel)]="this.game.homeCurrentFouls">
																	</ion-input>
																</div>
																<div class="input">
																	<ion-label class="input-label" for="homePartialTOL" color="{{homeColor()}}">Partial TO:</ion-label>
																	<ion-input
																		class="input-box"
																		color="{{homeColor()}}"
																		type="number"
																		id ="homePartialTOL"
																		(ionChange)="updateGame()"
																		[placeholder]="0"
																		[(ngModel)]="this.game.homePartialTOL">
																	</ion-input>
																</div>
																<div class="input">
																	<ion-label class="input-label" color="{{homeColor()}}" for="homeFullTOL">Full TO:</ion-label>
																	<ion-input
																		class="input-box"
																		[color]="homeColor()"
																		type="number"
																		id ="homeFullTOL"
																		(ionChange)="updateGame()"
																		[placeholder]="0"
																		[(ngModel)]="this.game.homeFullTOL">
																	</ion-input>
																</div>
															</div>
														</div>
													</ion-label>
												</ion-card-header>
												<ion-grid>
													<ion-row>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 1)">+1</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 3)">+3</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 2)">+2</ion-button>
														</ion-col>
													</ion-row>
													<ion-row>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 1, true)">1</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 3, true)">3</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 2, true)">MISS</ion-button>
														</ion-col>
													</ion-row>
													<ion-row>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addFoul('home')">FOUL</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addSteal('home')">STL</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{homeColor()}}" (click)="addTurnover('home')">TO</ion-button>
														</ion-col>
													</ion-row>
													<ion-row>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addAssist('home')">AST</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addPassback('home', true)">PB+</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addPassback('home', false)">PB-</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addBlock('home')">BLK</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addRebound('home', true)">OR</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addRebound('home', false)">DR</ion-button>
														</ion-col>
													</ion-row>
												</ion-grid>
											</ion-card>
										</ion-col>
										<ion-col class="ion-no-padding">
											<ion-grid style="height: 100%;" class="ion-no-padding">
												<ion-row class="ion-align-items-center">
													<ion-col size="3">
														<ion-button fill="clear" expand="block" color="{{homeColor()}}" (click)="addTimeout('home', true)">T30</ion-button>
														<ion-button fill="clear" expand="block" color="{{homeColor()}}" (click)="addTimeout('home', false)">T60</ion-button>
														<ion-button id="addHomePlayer" fill="clear" expand="block" color="{{homeColor()}}">
															<ion-icon size="large" slot="icon-only" name="add-circle-sharp"></ion-icon>
														</ion-button>
													</ion-col>
													<ion-col size="6">
														<ion-input
															class="ion-text-center"
															fill="clear"
															style="color: grey; font-size: xx-large; font-weight: bolder; margin-bottom: 4px;"
															[(ngModel)]="game.clock"
															(ionChange)="updateGame()"
														></ion-input>
														<ion-input
															style="color: grey"
															label="Period:"
															fill="outline"
															[(ngModel)]="game.period"
															(ionChange)="changePeriod()"
															type="number"
														></ion-input>
													</ion-col>
													<ion-col size="3">
														<ion-button fill="clear" expand="block" color="{{awayColor()}}" (click)="addTimeout('away', true)">T30</ion-button>
														<ion-button fill="clear" expand="block" color="{{awayColor()}}" (click)="addTimeout('away', false)">T60</ion-button>
														<ion-button id="addAwayPlayer" fill="clear" expand="block" color="{{awayColor()}}">
															<ion-icon size="large" slot="icon-only" name="add-circle-sharp"></ion-icon>
														</ion-button>
													</ion-col>
												</ion-row>
												<ion-row>
													<ion-col size=2></ion-col>
													<ion-col size="8">
														<ion-button class="timer-style" expand="block" color="medium" (click)="toggleTimer()">{{ timerRunning ? 'Stop' : 'Start' }}</ion-button>
													</ion-col>
													<ion-col size="2"></ion-col>
												</ion-row>
												<ion-row>
													<ion-col size="2"></ion-col>
													<ion-col size="8">
														<ion-item [button]="true" (click)="switchPossession()" color="light" class="ion-text-center" lines="none">
															<ion-button color="warning" slot="start" fill="clear">
																<ion-icon name="radio-button-{{game.homeHasPossession ? 'on' : 'off'}}" slot="icon-only"></ion-icon>
															</ion-button>
															<ion-label>POSS</ion-label>
															<ion-button color="warning" slot="end" fill="clear">
																<ion-icon name="radio-button-{{!game.homeHasPossession ? 'on' : 'off'}}" slot="icon-only"></ion-icon>
															</ion-button>
														</ion-item>
													</ion-col>
													<ion-col size="2"></ion-col>
												</ion-row>
												<ion-row>
													<ion-col size="2"></ion-col>
													<ion-col class="ion-text-center" size="8">
														@if (dataService.selectedPlayer(); as selectedPlayer) {
															@if (dataService.selectedPlayerStat(); as selectedPlayerStat) {
																<ion-card>
																	<ion-card-header>
																		  <ion-card-title>{{ selectedPlayer.firstName }}  {{selectedPlayer.lastName}}</ion-card-title>
																	</ion-card-header>

																	<ion-card-content>
																		<ion-row>
																			<ion-col>
																				FOULS:{{selectedPlayerStat.fouls}}
																			</ion-col>
																			<ion-col>
																				PTS:{{selectedPlayerStat.points}}
																			</ion-col>
																			<ion-col>
																				RB:{{selectedPlayerStat.rebounds}}
																			</ion-col>
																		</ion-row>
																		<ion-row>
																			<ion-col>
																				AST:{{selectedPlayerStat.assists}}
																			</ion-col>
																			<ion-col>
																				STL:{{selectedPlayerStat.steals}}
																			</ion-col>
																			<ion-col>
																				BLK:{{selectedPlayerStat.blocks}}
																			</ion-col>
																		</ion-row>
																	</ion-card-content>
																</ion-card>
															}
														}
													</ion-col>
													<ion-col size="2"></ion-col>
												</ion-row>
												<ion-row style="height: 30%; align-items: center;">
													<ion-col size="1"></ion-col>
													<ion-col size="10">
														<ion-item color="light" *ngIf="assistDisplay" lines="none">
															<ion-label>
																<h1>Assist?</h1>
															</ion-label>
															<ion-button size="large" (click)="this.assistDisplay = false" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
														<ion-item color="light" *ngIf="foulDisplay" lines="none">
															<ion-label>
																<h2>Technical?</h2>
															</ion-label>
															<ion-buttons slot="end">
																<ion-button (click)="addTechnical()" fill="clear">Yes</ion-button>
																<ion-button (click)="this.foulDisplay = false" fill="clear">No</ion-button>
															</ion-buttons>
														</ion-item>
														<ion-item color="light" *ngIf="stealDisplay" lines="none">
															<ion-label>
																<h1>Turnover?</h1>
															</ion-label>
															<ion-button size="large" (click)="this.stealDisplay = false" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
														<ion-item color="light" *ngIf="reboundDisplay" lines="none">
															<ion-label>
																<h1>Rebound?</h1>
															</ion-label>
															<ion-button (click)="this.reboundDisplay = false" size="large" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
														<ion-item color="light" *ngIf="missedDisplay" lines="none">
															<ion-label>
																<h1>Missed?</h1>
															</ion-label>
															<ion-button (click)="this.missedDisplay = false" size="large" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
													</ion-col>
													<ion-col size="1"></ion-col>
												</ion-row>
											</ion-grid>
										</ion-col>
										<ion-col>
											<ion-grid style="border-radius: 5px; background-color: #eaeaea; width: 100%; padding: 5px;">
												<ion-row>
													@for (player of dataService.awayPlayersOnCourt(); track player.id) {
														<ion-col id="context-menu-trigger-awayCourt{{$index}}">
															@if (player.number == -1) {
																<ion-button
																	style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
																	[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
																	color="{{awayColor()}}" fill="clear"
																	shape="round"
																	expand="block"
																	(tap)="selectPlayer('away', player.id)">
																	<ion-label>T</ion-label>
																</ion-button>
															} @else {
																<ion-button
																	style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
																	[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
																	color="{{awayColor()}}" fill="clear"
																	shape="round"
																	expand="block"
																	(tap)="selectPlayer('away', player.id)"
																	(doubleTap)="removeFromCourt(player)">
																	<ion-label>{{player.number}}</ion-label>
																</ion-button>
															}
														</ion-col>
													}
												</ion-row>
											</ion-grid>
											<ion-card>
												<ion-card-header>
													<ion-card-title color="{{awayColor()}}" class="ion-text-center ion-no-padding">
														{{ game.awayTeam.teamName }}
													</ion-card-title>
													<ion-label class="ion-margin-top ion-text-center">
														<ion-button id="editAwayPeriod" fill="clear" color="{{awayColor()}}" class="team-score digital-number">{{ game.awayFinal }}</ion-button>
														<div class="away-font">
															<div class="input-div">
																<div class="input">
																	<ion-label color="{{awayColor()}}" class="input-label" for="awayCurrentFouls">Fouls:</ion-label>
																	<ion-input
																		class="input-box"
																		color="{{awayColor()}}"
																		type="number"
																		id ="awayCurrentFouls"
																		(ionChange)="updateGame()"
																		[placeholder]="0"
																		[(ngModel)]="this.game.awayCurrentFouls">
																	</ion-input>
																</div>
																<div class="input">
																	<ion-label color="{{awayColor()}}" class="input-label" for="awayPartialTOL">Partial TO:</ion-label>
																	<ion-input
																		class="input-box"
																		[color]="awayColor()"
																		type="number"
																		id ="awayPartialTOL"
																		(ionChange)="updateGame()"
																		[placeholder]="0"
																		[(ngModel)]="this.game.awayPartialTOL">
																	</ion-input>
																</div>
																<div class="input">
																	<ion-label color="{{awayColor()}}" class="input-label" for="awayFullTOL">Full TO:</ion-label>
																	<ion-input
																		class="input-box"
																		color="{{awayColor()}}"
																		type="number"
																		id ="awayFullTOL"
																		(ionChange)="updateGame()"
																		[placeholder]="0"
																		[(ngModel)]="this.game.awayFullTOL">
																	</ion-input>
																</div>
															</div>
														</div>
													</ion-label>
												</ion-card-header>
												<ion-grid>
													<ion-row>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 1)">+1</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 3)">+3</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 2)">+2</ion-button>
														</ion-col>
													</ion-row>
													<ion-row>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 1, true)">1</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 3, true)">3</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 2, true)">MISS</ion-button>
														</ion-col>
													</ion-row>
													<ion-row>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addFoul('away')">FOUL</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addSteal('away')">STL</ion-button>
														</ion-col>
														<ion-col>
															<ion-button expand="block" color="{{awayColor()}}" (click)="addTurnover('away')">TO</ion-button>
														</ion-col>
													</ion-row>
													<ion-row>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addAssist('away')">AST</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addPassback('away', true)">PB+</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addPassback('away', false)">PB-</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addBlock('away')">BLK</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addRebound('away', true)">OR</ion-button>
														</ion-col>
														<ion-col>
															<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addRebound('away', false)">DR</ion-button>
														</ion-col>
													</ion-row>
												</ion-grid>
											</ion-card>
										</ion-col>
									</ion-row>
								</ion-grid>
							</ion-col>
						</ion-row>
						<ion-row class="ion-justify-content-center">
							<ion-col class="clickable" id="playsModalTrigger" size="10">
								<ion-list inset="true" lines="full">
									@for (play of dataService.plays() | slice:0:4; track play.id) {
										<ion-item>
											@if (play.turboStatsData) {
												<ion-label>{{play.turboStatsData}}</ion-label>
											} @else if (play.sgLegacyData) {
												<ion-label>
													{{play.id}} | {{play.sgLegacyData}} | {{actions.get(play.action)}} | P{{play.period}} | {{play.score}} | {{play.gameClock}} | {{play.timeStamp | date: 'shortTime'}}
												</ion-label>
											} @else {
												<ion-label>
													{{play.id}} | {{play.team?.name}} | {{play.player?.number}} {{play.player?.firstName}} {{play.player?.lastName}} | {{actions.get(play.action)}} | P{{play.period}} | {{play.score}} | {{play.gameClock}} | {{play.timeStamp | date: 'shortTime'}}
												</ion-label>
											}
										</ion-item>
									}
								</ion-list>
							</ion-col>
						</ion-row>
					</ion-grid>
				</ion-col>
				<ion-col class="ion-no-padding ion-text-center" size="1">
					@for (player of dataService.awayTeamPlayers(); track player.id) {
						@if (player.number != -1 && !dataService.hiddenPlayerIds().includes(player.id)) {
							<ion-button
								[fill]="dataService.awayPlayersOnCourt().includes(player) ? 'outline' : 'clear'"
								color="{{awayColor()}}"
								id="context-menu-trigger-away{{$index}}"
								(click)="addToCourt('away', player)">
								{{player.number}}
							</ion-button>
							<ion-popover trigger="context-menu-trigger-away{{$index}}" [showBackdrop]="false" triggerAction="context-menu">
								<ng-template>
									<app-edit-player color="{{awayColor()}}" [player]="player" (savePlayer)="dataService.updatePlayer(player)"></app-edit-player>
								</ng-template>
							</ion-popover>
						}
					}
				</ion-col>
			</ion-row>
		</ion-grid>

		<ion-popover trigger="detailModal" #settingsModal>
			<ng-template>
				<app-gamecast-detail [game]="game"></app-gamecast-detail>
			</ng-template>
		</ion-popover>
		<ion-modal [backdropDismiss]="false" #playsModal trigger="playsModalTrigger">
			<ng-template>
				<ion-header>
					<ion-toolbar color="medium">
						<ion-title>Plays</ion-title>
						<ion-buttons slot="end">
							<ion-button (click)="playsModal.dismiss()">
								<ion-icon slot="icon-only" name="close"></ion-icon>
							</ion-button>
						</ion-buttons>
					</ion-toolbar>
				</ion-header>
				<ion-content class="ion-padding">
					<ion-list inset="true" lines="full">
						<ng-container *ngFor="let play of plays">
							<ion-item *ngIf="play.turboStatsData">
								<ion-label>{{play.turboStatsData}}</ion-label>
							</ion-item>
							<ion-item *ngIf="!play.turboStatsData">
								<ion-grid class="ion-text-center">
									<ion-row class="ion-align-items-center playsRow">
										<ion-col>{{play.playOrder}}</ion-col>
										<ion-col class="clickable" size="2">
											<div id="teamNameTrigger{{play.playOrder}}">{{play.teamName}}</div>
											<ion-popover trigger="teamNameTrigger{{play.playOrder}}" [dismissOnSelect]="true">
												<ng-template>
													<ion-content>
														<ion-radio-group (ionChange)="updatePlay(play)" [(ngModel)]="play.teamName">
															<ion-item lines="full">
																<ion-radio [value]="homeTeamName">{{homeTeamName}}</ion-radio>
															</ion-item>
															<ion-item lines="full">
																<ion-radio [value]="awayTeamName">{{awayTeamName}}</ion-radio>
															</ion-item>
														</ion-radio-group>
													</ion-content>
												</ng-template>
											</ion-popover>
										</ion-col>
										<ion-col class="clickable" size="2">
											<div id="playerTrigger{{play.playOrder}}">{{play.playerName != null ? play.playerNumber + ' ' + play.playerName : 'Null'}}</div>
											<ion-popover class="scrollable" trigger="playerTrigger{{play.playOrder}}" [dismissOnSelect]="true">
												<ng-template>
													<ion-content>
														<ion-radio-group (ionChange)="updatePlayerPlay($event, play)" [value]="getPlayer(play)">
															<ion-item lines="full">
																<ion-radio [value]="null">Null</ion-radio>
															</ion-item>
															<ion-item
																[hidden]="(play.teamName == awayTeamName && item.teamId != game.awayTeamId) ||
																	(play.teamName == homeTeamName && item.teamId != game.homeTeamId)"
																lines="full"
																*ngFor="let item of players()">
																<ion-radio [value]="item">{{item.number}} {{item.firstName}} {{item.lastName}}</ion-radio>
															</ion-item>
														</ion-radio-group>
													</ion-content>
												</ng-template>
											</ion-popover>
										</ion-col>
										<ion-col class="clickable">
											<div id="actionTrigger{{play.playOrder}}">{{actions.get(play.action)}}</div>
											<ion-popover class="scrollable" trigger="actionTrigger{{play.playOrder}}" [dismissOnSelect]="true">
												<ng-template>
													<ion-content>
														<ion-list>
															<ion-list-header>
																Please verify the team and player before changing the action!
															</ion-list-header>
															<ion-radio-group (ionChange)="updatePlay(play)" [(ngModel)]="play.action">
																<ion-item lines="full" *ngFor="let action of actions.keys()">
																	<ion-radio [value]="action">{{actions.get(action)}}</ion-radio>
																</ion-item>
															</ion-radio-group>
														</ion-list>
													</ion-content>
												</ng-template>
											</ion-popover>
										</ion-col>
										<ion-col>P{{play.period}}</ion-col>
										<ion-col>{{play.gameClock}}</ion-col>
										<ion-col>{{play.score}}</ion-col>
										<ion-col style="border-right: none;">{{play.timeStamp | date: 'shortTime'}}</ion-col>
									</ion-row>
								</ion-grid>
							</ion-item>
						</ng-container>
					</ion-list>
				</ion-content>
			</ng-template>
		</ion-modal>
		<ion-modal [backdropDismiss]="false" #statsModal trigger="liveStatsModal">
			<ng-template>
				<ion-header>
					<ion-toolbar color="medium">
						<ion-title>Box Score</ion-title>
						<ion-buttons slot="end">
							<ion-button (click)="statsModal.dismiss()">
								<ion-icon slot="icon-only" name="close"></ion-icon>
							</ion-button>
						</ion-buttons>
					</ion-toolbar>
					<ion-toolbar>
						<ion-segment color="medium" mode="md" [(ngModel)]="statsTab">
							<ion-segment-button value="home">
								<ion-label color="{{homeColor()}}">{{game.homeTeam.teamName}}</ion-label>
							</ion-segment-button>
							<ion-segment-button value="away">
								<ion-label color="{{awayColor()}}">{{game.awayTeam.teamName}}</ion-label>
							</ion-segment-button>
						</ion-segment>
					</ion-toolbar>
				</ion-header>
				<ion-content [scrollY]="false">
					@if (statsTab == 'home') {
						<ag-grid-angular
							class="ag-theme-alpine"
							style="width: 100%; height: 100%;"
							[columnDefs]="teamStats"
							[defaultColDef]="{sortable: true, filter: true, editable: true}"
							[rowData]="dataService.boxScore().homeBoxScore"
							[rowSelection]="'single'"
							[pagination]="true"
							[suppressCellFocus]="true"
							(cellEditingStopped)="editingStopped($event)"
							(gridReady)="homeStatGridApi = $event.api; setTotals('home')">
						</ag-grid-angular>
					} @else {
						<ag-grid-angular
							class="ag-theme-alpine"
							style="width: 100%; height: 100%;"
							[columnDefs]="teamStats"
							[defaultColDef]="{sortable: true, filter: true, editable: true}"
							[rowData]="dataService.boxScore().awayBoxScore"
							[rowSelection]="'single'"
							[pagination]="true"
							[suppressCellFocus]="true"
							(cellEditingStopped)="editingStopped($event)"
							(gridReady)="awayStatGridApi = $event.api; setTotals('away')">
						</ag-grid-angular>
					}
				</ion-content>
			</ng-template>
		</ion-modal>
		<ion-modal trigger="addHomePlayer" #addHomePlayerModal [backdropDismiss]="false">
			<ng-template>
				<app-add-player
					style="height: 100%;"
					team="home"
					[teamId]="game.homeTeamId"
					[isMale]="isMale"
					[players]="players()!"
					[settings]="game"
					(playerAdded)="addPlayer($event)"
					(playerHidden)="hidePlayer($event)"
					(playerUnhidden)="unhidePlayer($event)"
					[color]="homeColor()"
					(dismiss)="addHomePlayerModal.dismiss()"
				></app-add-player>
			</ng-template>
		</ion-modal>
		<ion-modal trigger="addAwayPlayer" #addAwayPlayerModal [backdropDismiss]="false">
			<ng-template>
				<app-add-player
					style="height: 100%;"
					team="away"
					[teamId]="game.awayTeamId"
					[isMale]="isMale"
					[players]="players()!"
					[settings]="game"
					(playerAdded)="addPlayer($event)"
					(playerHidden)="hidePlayer($event)"
					(playerUnhidden)="unhidePlayer($event)"
					[color]="awayColor()"
					(dismiss)="addAwayPlayerModal.dismiss()"
				></app-add-player>
			</ng-template>
		</ion-modal>
		<ion-modal class="edit-points-modal" trigger="editHomePeriod" [backdropDismiss]="false">
			<ng-template>
				<ion-content [scrollY]="false">
					<app-edit-period-total
						team="home"
						[color]="homeColor()"
						[game]="game"
						(update)="updateGame()"
					></app-edit-period-total>
				</ion-content>
			</ng-template>
		</ion-modal>
		<ion-modal class="edit-points-modal" trigger="editAwayPeriod" [backdropDismiss]="false">
			<ng-template>
				<ion-content [scrollY]="false">
					<app-edit-period-total
						team="away"
						[color]="awayColor()"
						[game]="game"
						(update)="updateGame()"
					></app-edit-period-total>
				</ion-content>
			</ng-template>
		</ion-modal>
		<ion-popover [showBackdrop]="false" trigger="color-trigger" triggerAction="click">
			<ng-template>
				<ion-grid>
					<ion-row>
						<ion-col>
							<ion-radio-group [(ngModel)]="colorTeam">
								<ion-radio value="home" labelPlacement="end">Home</ion-radio>
								<ion-radio value="away" labelPlacement="end">Away</ion-radio>
							</ion-radio-group>
						</ion-col>
					</ion-row>
					<ion-row>
						<ion-col>
							<ion-button (click)="changeColor('blue')" id="blue" color="blue" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="blue"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('pink')" color="pink" id="pink" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="pink"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('purple')" color="purple" id="purple" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="purple"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('orange')" color="orange" id="orange" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="orange"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('grey')" color="grey" id="grey" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="grey"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('navy')" color="navy" id="navy" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="navy"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('coral')" color="coral" id="coral" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="coral"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('lilac')" color="lilac" id="lilac" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="lilac"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('green')" color="green" id="green" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="green"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('red')" color="red" id="red" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="red"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('gold')" color="gold" id="gold" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="gold"></ion-icon>
							</ion-button>
							<ion-button (click)="changeColor('teal')" color="teal" id="teal" fill="clear">
								<ion-icon slot="icon-only" name="basketball" color="teal"></ion-icon>
							</ion-button>
						</ion-col>
					</ion-row>
				</ion-grid>
			</ng-template>
		</ion-popover>
	</ion-content>
}

