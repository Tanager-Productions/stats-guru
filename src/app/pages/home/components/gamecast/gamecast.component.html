@if (dataService.game(); as game) {
	<ion-header>
	  <ion-toolbar color="primary">
		<ion-breadcrumbs>
		  <ion-breadcrumb routerLink="/home/games">Games</ion-breadcrumb>
		  <ion-breadcrumb>Gamecast: {{ game.homeTeam.teamName }} VS {{ game.awayTeam.teamName }} ({{game.homeTeam.isMale ? 'Mens' : 'Womens'}})</ion-breadcrumb>
		</ion-breadcrumbs>
		<ion-buttons slot="end">
			<ion-button (click)="dataService.removeLastPlay()">
				<ion-icon slot="icon-only" name="arrow-undo"></ion-icon>
			</ion-button>
			<ion-button id="liveStatsModal">
				<ion-icon slot="icon-only" name="stats-chart"></ion-icon>
			</ion-button>
			<ion-button id="detailModal">
				<ion-icon slot="icon-only" name="settings"></ion-icon>
			</ion-button>
			<ion-button id="color-trigger">
				<ion-icon slot="icon-only" name="brush"></ion-icon>
			</ion-button>
			<ion-button id="logsButton">
				<ion-icon name="help" slot="icon-only"></ion-icon>
			</ion-button>
			<ion-popover trigger="logsButton" #popover>
				<ng-template>
					<ion-content class="ion-padding">
						<ion-label>If you're experiencing issues, send the games error logs to the server.</ion-label>
						<ion-button expand="block" (click)="sendLogs(popover)">
							@if (sendingLogs) {
								<ion-spinner name="dots"></ion-spinner>
							} @else {
								Send logs to server
							}
						</ion-button>
					</ion-content>
				</ng-template>
			</ion-popover>
			@if (game.complete) {
				<ion-button fill="solid" color="success" (click)='dataService.toggleGameComplete()'>Complete</ion-button>
			} @else {
				<ion-button fill="solid" color="warning" (click)='dataService.toggleGameComplete()'>Live</ion-button>
			}
		</ion-buttons>
	  </ion-toolbar>
	</ion-header>

	<ion-content class="ion-no-padding" color="light">
		<ion-grid style="height: 100%; width: 100%">
			<ion-row>
				<ion-col class="player-col" size="0.9">
					@for (player of dataService.homeTeamPlayers(); track player.id) {
						@if (!dataService.hiddenPlayerIds().includes(player.id) && player.number != -1) {
							<ion-button
								size="large"
								[fill]="dataService.homePlayersOnCourt().includes(player) ? 'outline' : 'clear'"
								id="context-menu-trigger{{$index}}"
								color="{{homeColor()}}"
								(click)="addToCourt('home', player)">
								{{player.number}}
							</ion-button>
							<ion-popover trigger="context-menu-trigger{{$index}}" [showBackdrop]="false" triggerAction="context-menu">
								<ng-template>
									<app-edit-player [player]="player" (savePlayer)="dataService.updatePlayer(player)"></app-edit-player>
								</ng-template>
							</ion-popover>
						}
					}
				</ion-col>
				<ion-col class="ion-no-padding" size="10.2">
					<ion-grid class="ion-no-padding">
						<ion-row>
							<ion-col>
								<ion-grid style="background-color: #eaeaea; border-radius: 5px; width: 100%; padding: 5px;">
									<ion-row>
										@for (player of dataService.homePlayersOnCourt(); track player.id) {
											<ion-col id="context-menu-trigger-homeCourt{{$index}}">
												@if (player.number == -1) {
													<ion-button
														style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
														[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
														color="{{homeColor()}}"
														fill="clear"
														shape="round"
														expand="block"
														(tap)="selectPlayer(player.id)">
														<ion-label>T</ion-label>
													</ion-button>
												} @else {
													<ion-button
														style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
														[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
														color="{{homeColor()}}"
														fill="clear"
														shape="round"
														expand="block"
														(tap)="selectPlayer(player.id)"
														(doubleTap)="removeFromCourt(player)">
														<ion-label>{{player.number}}</ion-label>
													</ion-button>
												}
											</ion-col>
										}
									</ion-row>
								</ion-grid>
								<ion-card>
									<ion-card-header>
										<ion-card-title color="{{homeColor()}}" class="ion-text-center">
											{{ game.homeTeam.teamName }}
										</ion-card-title>
										<ion-label class="ion-margin-top ion-text-center">
											<ion-button id="editHomePeriod" fill="clear" color="{{homeColor()}}" class="team-score digital-number">{{ game.homeFinal }}</ion-button>
											<div class="home-font">
												<div class="input-div">
													<div class="input">
														<ion-label class="input-label" for="homeCurrentFouls" color="{{homeColor()}}">Fouls:</ion-label>
														<ion-input
															class="input-box"
															color="{{homeColor()}}"
															type="number"
															id="homeCurrentFouls"
															(ionChange)="dataService.updateCurrentFouls('home', $event)"
															[placeholder]="0"
															[value]="this.game.homeCurrentFouls">
														</ion-input>
													</div>
													<div class="input">
														<ion-label class="input-label" for="homePartialTOL" color="{{homeColor()}}">Partial TO:</ion-label>
														<ion-input
															class="input-box"
															color="{{homeColor()}}"
															type="number"
															id="homePartialTOL"
															(ionChange)="dataService.updatePartialTOLs('home', $event)"
															[placeholder]="0"
															[value]="this.game.homePartialTOL">
														</ion-input>
													</div>
													<div class="input">
														<ion-label class="input-label" color="{{homeColor()}}" for="homeFullTOL">Full TO:</ion-label>
														<ion-input
															class="input-box"
															[color]="homeColor()"
															type="number"
															id="homeFullTOL"
															(ionChange)="dataService.updateFullTOLs('home', $event)"
															[placeholder]="0"
															[value]="this.game.homeFullTOL">
														</ion-input>
													</div>
												</div>
											</div>
										</ion-label>
									</ion-card-header>
									<ion-grid>
										<ion-row>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 1)">+1</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 3)">+3</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 2)">+2</ion-button>
											</ion-col>
										</ion-row>
										<ion-row>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 1, true)">1</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 3, true)">3</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addPoints('home', 2, true)">MISS</ion-button>
											</ion-col>
										</ion-row>
										<ion-row>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addFoul('home')">FOUL</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addSteal('home')">STL</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{homeColor()}}" (click)="addTurnover('home')">TO</ion-button>
											</ion-col>
										</ion-row>
										<ion-row>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addAssist('home')">AST</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addPassback('home', true)">PB+</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addPassback('home', false)">PB-</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addBlock('home')">BLK</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addRebound('home', true)">OR</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{homeColor()}}" (click)="addRebound('home', false)">DR</ion-button>
											</ion-col>
										</ion-row>
									</ion-grid>
								</ion-card>
							</ion-col>
							<ion-col class="ion-no-padding">
								<ion-grid style="height: 100%;" class="ion-no-padding">
									<ion-row class="ion-align-items-center">
										<ion-col size="3">
											<ion-button fill="clear" expand="block" color="{{homeColor()}}" (click)="addTimeout('home', true)">T30</ion-button>
											<ion-button fill="clear" expand="block" color="{{homeColor()}}" (click)="addTimeout('home', false)">T60</ion-button>
											<ion-button id="addHomePlayer" fill="clear" expand="block" color="{{homeColor()}}">
												<ion-icon size="large" slot="icon-only" name="add-circle-sharp"></ion-icon>
											</ion-button>
										</ion-col>
										<ion-col size="6">
											<ion-input
												[readonly]="timerRunning"
												class="ion-text-center"
												fill="clear"
												style="color: grey; font-size: xx-large; font-weight: bolder; margin-bottom: 4px;"
												[(ngModel)]="clock"
											></ion-input>
											<ion-input
												style="color: grey"
												label="Period:"
												fill="outline"
												[value]="game.period"
												(ionChange)="changePeriod($event)"
												type="number"
											></ion-input>
										</ion-col>
										<ion-col size="3">
											<ion-button fill="clear" expand="block" color="{{awayColor()}}" (click)="addTimeout('away', true)">T30</ion-button>
											<ion-button fill="clear" expand="block" color="{{awayColor()}}" (click)="addTimeout('away', false)">T60</ion-button>
											<ion-button id="addAwayPlayer" fill="clear" expand="block" color="{{awayColor()}}">
												<ion-icon size="large" slot="icon-only" name="add-circle-sharp"></ion-icon>
											</ion-button>
										</ion-col>
									</ion-row>
									<ion-row>
										<ion-col size=2></ion-col>
										<ion-col size="8">
											<ion-button class="timer-style" expand="block" color="medium" (click)="toggleTimer()">{{ timerRunning ? 'Stop' : 'Start' }}</ion-button>
										</ion-col>
										<ion-col size="2"></ion-col>
									</ion-row>
									<ion-row>
										<ion-col size="2"></ion-col>
										<ion-col size="8">
											<ion-item [button]="true" (click)="dataService.switchPossession()" color="light" class="ion-text-center" lines="none">
												<ion-button color="warning" slot="start" fill="clear">
													<ion-icon name="radio-button-{{game.homeHasPossession ? 'on' : 'off'}}" slot="icon-only"></ion-icon>
												</ion-button>
												<ion-label>POSS</ion-label>
												<ion-button color="warning" slot="end" fill="clear">
													<ion-icon name="radio-button-{{!game.homeHasPossession ? 'on' : 'off'}}" slot="icon-only"></ion-icon>
												</ion-button>
											</ion-item>
										</ion-col>
										<ion-col size="2"></ion-col>
									</ion-row>
									<ion-row>
										<ion-col size="2"></ion-col>
										<ion-col class="ion-text-center" size="8">
											@if (dataService.selectedPlayer(); as selectedPlayer) {
												@if (dataService.selectedPlayerStat(); as selectedPlayerStat) {
													<ion-card>
														<ion-card-header>
															  <ion-card-title>{{ selectedPlayer.firstName }}  {{selectedPlayer.lastName}}</ion-card-title>
														</ion-card-header>

														<ion-card-content>
															<ion-row>
																<ion-col>
																	FOULS:{{selectedPlayerStat.fouls}}
																</ion-col>
																<ion-col>
																	PTS:{{selectedPlayerStat.points}}
																</ion-col>
																<ion-col>
																	RB:{{selectedPlayerStat.rebounds}}
																</ion-col>
															</ion-row>
															<ion-row>
																<ion-col>
																	AST:{{selectedPlayerStat.assists}}
																</ion-col>
																<ion-col>
																	STL:{{selectedPlayerStat.steals}}
																</ion-col>
																<ion-col>
																	BLK:{{selectedPlayerStat.blocks}}
																</ion-col>
															</ion-row>
														</ion-card-content>
													</ion-card>
												}
											}
										</ion-col>
										<ion-col size="2"></ion-col>
									</ion-row>
									<ion-row style="height: 30%; align-items: center;">
										<ion-col size="1"></ion-col>
										<ion-col size="10">
											@if (autocomplete(); as ac) {
												@switch (ac) {
													@case ('assist') {
														<ion-item color="light" lines="none">
															<ion-label>
																<h1>Assist?</h1>
															</ion-label>
															<ion-button size="large" (click)="dismissAutocomplete()" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
													} @case ('technical') {
														<ion-item color="light" lines="none">
															<ion-label>
																<h1>Technical?</h1>
															</ion-label>
															<ion-button size="large" color="tertiary" (click)="addTechnical()" fill="clear">Yes</ion-button>
															<ion-button size="large" color="tertiary" (click)="dismissAutocomplete()" fill="clear">No</ion-button>
														</ion-item>
													} @case ('rebound') {
														<ion-item color="light" lines="none">
															<ion-label>
																<h1>Rebound?</h1>
															</ion-label>
															<ion-button (click)="dismissAutocomplete()" size="large" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
													} @case ('missed') {
														<ion-item color="light" lines="none">
															<ion-label>
																<h1>Missed?</h1>
															</ion-label>
															<ion-button (click)="dismissAutocomplete()" size="large" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
													} @case ('turnover') {
														<ion-item color="light" lines="none">
															<ion-label>
																<h1>Turnover?</h1>
															</ion-label>
															<ion-button size="large" (click)="dismissAutocomplete()" fill="clear">
																<ion-icon color="medium" size="large" slot="icon-only" name="close"></ion-icon>
															</ion-button>
														</ion-item>
													}
												}
											}
										</ion-col>
										<ion-col size="1"></ion-col>
									</ion-row>
								</ion-grid>
							</ion-col>
							<ion-col>
								<ion-grid style="border-radius: 5px; background-color: #eaeaea; width: 100%; padding: 5px;">
									<ion-row>
										@for (player of dataService.awayPlayersOnCourt(); track player.id) {
											<ion-col id="context-menu-trigger-awayCourt{{$index}}">
												@if (player.number == -1) {
													<ion-button
														style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
														[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
														color="{{awayColor()}}" fill="clear"
														shape="round"
														expand="block"
														(tap)="selectPlayer(player.id)">
														<ion-label>T</ion-label>
													</ion-button>
												} @else {
													<ion-button
														style="border-radius: 50px; --padding-start: 0px; --padding-end: 0px;"
														[ngClass]="{'selectedButton': dataService.selectedPlayerId() == player.id}"
														color="{{awayColor()}}" fill="clear"
														shape="round"
														expand="block"
														(tap)="selectPlayer(player.id)"
														(doubleTap)="removeFromCourt(player)">
														<ion-label>{{player.number}}</ion-label>
													</ion-button>
												}
											</ion-col>
										}
									</ion-row>
								</ion-grid>
								<ion-card>
									<ion-card-header>
										<ion-card-title color="{{awayColor()}}" class="ion-text-center ion-no-padding">
											{{ game.awayTeam.teamName }}
										</ion-card-title>
										<ion-label class="ion-margin-top ion-text-center">
											<ion-button id="editAwayPeriod" fill="clear" color="{{awayColor()}}" class="team-score digital-number">{{ game.awayFinal }}</ion-button>
											<div class="away-font">
												<div class="input-div">
													<div class="input">
														<ion-label color="{{awayColor()}}" class="input-label" for="awayCurrentFouls">Fouls:</ion-label>
														<ion-input
															class="input-box"
															color="{{awayColor()}}"
															type="number"
															id="awayCurrentFouls"
															(ionChange)="dataService.updateCurrentFouls('away', $event)"
															[placeholder]="0"
															[value]="this.game.awayCurrentFouls">
														</ion-input>
													</div>
													<div class="input">
														<ion-label color="{{awayColor()}}" class="input-label" for="awayPartialTOL">Partial TO:</ion-label>
														<ion-input
															class="input-box"
															[color]="awayColor()"
															type="number"
															id="awayPartialTOL"
															(ionChange)="dataService.updatePartialTOLs('away', $event)"
															[placeholder]="0"
															[value]="this.game.awayPartialTOL">
														</ion-input>
													</div>
													<div class="input">
														<ion-label color="{{awayColor()}}" class="input-label" for="awayFullTOL">Full TO:</ion-label>
														<ion-input
															class="input-box"
															color="{{awayColor()}}"
															type="number"
															id="awayFullTOL"
															(ionChange)="dataService.updateFullTOLs('away', $event)"
															[placeholder]="0"
															[value]="this.game.awayFullTOL">
														</ion-input>
													</div>
												</div>
											</div>
										</ion-label>
									</ion-card-header>
									<ion-grid>
										<ion-row>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 1)">+1</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 3)">+3</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 2)">+2</ion-button>
											</ion-col>
										</ion-row>
										<ion-row>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 1, true)">1</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 3, true)">3</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addPoints('away', 2, true)">MISS</ion-button>
											</ion-col>
										</ion-row>
										<ion-row>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addFoul('away')">FOUL</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addSteal('away')">STL</ion-button>
											</ion-col>
											<ion-col>
												<ion-button expand="block" color="{{awayColor()}}" (click)="addTurnover('away')">TO</ion-button>
											</ion-col>
										</ion-row>
										<ion-row>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addAssist('away')">AST</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addPassback('away', true)">PB+</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addPassback('away', false)">PB-</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addBlock('away')">BLK</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addRebound('away', true)">OR</ion-button>
											</ion-col>
											<ion-col>
												<ion-button fill="clear" expand="block" size="small" color="{{awayColor()}}" (click)="addRebound('away', false)">DR</ion-button>
											</ion-col>
										</ion-row>
									</ion-grid>
								</ion-card>
							</ion-col>
						</ion-row>
						<ion-row class="ion-justify-content-center">
							<ion-col size="10">
								<ion-list inset="true" lines="full" class="clickable" id="playsModalTrigger">
									@for (play of dataService.plays() | slice:0:4; track play.id) {
										<ion-item>
											@if (play.turboStatsData) {
												<ion-label>{{play.turboStatsData}}</ion-label>
											} @else if (play.sgLegacyData) {
												<ion-label>
													{{play.id}} | {{play.sgLegacyData}} | {{actions.get(play.action)}} | P{{play.period}} | {{play.score}} | {{play.gameClock}} | {{play.timeStamp | date: 'shortTime'}}
												</ion-label>
											} @else {
												<ion-label>
													{{play.id}} | {{play.team?.name}} | {{play.player?.number}} {{play.player?.firstName}} {{play.player?.lastName}} | {{actions.get(play.action)}} | P{{play.period}} | {{play.score}} | {{play.gameClock}} | {{play.timeStamp | date: 'shortTime'}}
												</ion-label>
											}
										</ion-item>
									}
								</ion-list>
							</ion-col>
						</ion-row>
					</ion-grid>
				</ion-col>
				<ion-col class="player-col" size="0.9">
					@for (player of dataService.awayTeamPlayers(); track player.id) {
						@if (player.number != -1 && !dataService.hiddenPlayerIds().includes(player.id)) {
							<ion-button
								size="large"
								[fill]="dataService.awayPlayersOnCourt().includes(player) ? 'outline' : 'clear'"
								color="{{awayColor()}}"
								id="context-menu-trigger-away{{$index}}"
								(click)="addToCourt('away', player)">
								{{player.number}}
							</ion-button>
							<ion-popover trigger="context-menu-trigger-away{{$index}}" [showBackdrop]="false" triggerAction="context-menu">
								<ng-template>
									<app-edit-player [player]="player" (savePlayer)="dataService.updatePlayer(player)"></app-edit-player>
								</ng-template>
							</ion-popover>
						}
					}
				</ion-col>
			</ion-row>
		</ion-grid>
	</ion-content>

	<ion-popover trigger="detailModal" #settingsModal>
		<ng-template>
			<app-gamecast-detail [game]="game" (dismiss)="settingsModal.dismiss()"></app-gamecast-detail>
		</ng-template>
	</ion-popover>
	<ion-modal [backdropDismiss]="false" #playsModal [keepContentsMounted]="true" trigger="playsModalTrigger">
		<ng-template>
			<ion-header>
				<ion-toolbar color="medium">
					<ion-title>Plays</ion-title>
					<ion-buttons slot="end">
						<ion-button (click)="playsModal.dismiss()">
							<ion-icon slot="icon-only" name="close"></ion-icon>
						</ion-button>
					</ion-buttons>
				</ion-toolbar>
			</ion-header>
			<ion-content class="ion-padding">
				<ion-list inset="true" lines="full">
					@for (play of dataService.plays(); track play.id) {
						<ion-item [button]="!play.turboStatsData && !play.sgLegacyData" id="playTrigger{{play.id}}">
							@if (play.turboStatsData) {
								<ion-label>{{play.turboStatsData}}</ion-label>
							} @else if (play.sgLegacyData) {
								<ion-label>
									{{play.id}} | {{play.sgLegacyData}} | {{actions.get(play.action)}} | P{{play.period}} | {{play.score}} | {{play.gameClock}} | {{play.timeStamp | date: 'shortTime'}}
								</ion-label>
							} @else {
								<ion-label>
									{{play.id}} | {{play.team?.name}} | {{play.player?.number}} {{play.player?.firstName}} {{play.player?.lastName}} | {{actions.get(play.action)}} | P{{play.period}} | {{play.score}} | {{play.gameClock}} | {{play.timeStamp | date: 'shortTime'}}
								</ion-label>

								<ion-popover trigger="playTrigger{{play.id}}">
									<ng-template>
										<ion-content class="ion-padding">
											<ion-select label="Team" [value]="play.team?.teamId" #teamId>
												<ion-select-option [value]="game.homeTeam.teamId">{{ game.homeTeam.teamName }}</ion-select-option>
												<ion-select-option [value]="game.awayTeam.teamId">{{ game.awayTeam.teamName }}</ion-select-option>
											</ion-select>
											<ion-select label="Player" #playerId [value]="play.player ? play.player.playerId : null">
												<ion-select-option [value]="null">Null</ion-select-option>
												@for (item of dataService.players(); track item.id) {
													@if (item.teamId == teamId.value) {
														<ion-select-option [value]="item.id">{{ item.number }} {{ item.firstName }} {{ item.lastName }}</ion-select-option>
													}
												}
											</ion-select>
											<ion-select label="Action" [value]="play.action" #action>
												@for (action of actions.keys(); track $index) {
													<ion-select-option [value]="action">{{ actions.get(action) }}</ion-select-option>
												}
											</ion-select>
											<ion-button expand="block" color="tertiary" (click)="updatePlay(play, teamId.value, playerId.value, action.value)">Save</ion-button>
										</ion-content>
									</ng-template>
								</ion-popover>
							}
						</ion-item>
					}
				</ion-list>
			</ion-content>
		</ng-template>
	</ion-modal>
	<ion-modal [backdropDismiss]="false" #statsModal trigger="liveStatsModal">
		<ng-template>
			<ion-header>
				<ion-toolbar color="medium">
					<ion-title>Box Score</ion-title>
					<ion-buttons slot="end">
						<ion-button (click)="statsModal.dismiss()">
							<ion-icon slot="icon-only" name="close"></ion-icon>
						</ion-button>
					</ion-buttons>
				</ion-toolbar>
				<ion-toolbar>
					<ion-segment color="medium" mode="md" [(ngModel)]="statsTab">
						<ion-segment-button value="home">
							<ion-label color="{{homeColor()}}">{{game.homeTeam.teamName}}</ion-label>
						</ion-segment-button>
						<ion-segment-button value="away">
							<ion-label color="{{awayColor()}}">{{game.awayTeam.teamName}}</ion-label>
						</ion-segment-button>
					</ion-segment>
				</ion-toolbar>
			</ion-header>
			<ion-content [scrollY]="false">
				@if (statsTab == 'home') {
					<ag-grid-angular
						class="ag-theme-alpine"
						style="width: 100%; height: 100%;"
						[columnDefs]="teamStats"
						[defaultColDef]="{sortable: true, filter: true, editable: true}"
						[rowData]="dataService.boxScore().homeBoxScore"
						[rowSelection]="'single'"
						[pagination]="false"
						[suppressCellFocus]="true"
						[pinnedBottomRowData]="[dataService.boxScoreTotals().homeTotals]"
						(cellEditingStopped)="editingStopped($event)">
					</ag-grid-angular>
				} @else {
					<ag-grid-angular
						class="ag-theme-alpine"
						style="width: 100%; height: 100%;"
						[columnDefs]="teamStats"
						[defaultColDef]="{sortable: true, filter: true, editable: true}"
						[rowData]="dataService.boxScore().awayBoxScore"
						[rowSelection]="'single'"
						[pagination]="false"
						[suppressCellFocus]="true"
						[pinnedBottomRowData]="[dataService.boxScoreTotals().awayTotals]"
						(cellEditingStopped)="editingStopped($event)">
					</ag-grid-angular>
				}
			</ion-content>
		</ng-template>
	</ion-modal>
	<ion-modal trigger="addHomePlayer" #addHomePlayerModal [backdropDismiss]="false">
		<ng-template>
			<app-add-player
				[teamId]="game.homeTeam.teamId"
				[isMale]="game.homeTeam.isMale"
				[players]="dataService.players()"
				[stats]="dataService.stats()"
				(playerAdded)="dataService.addPlayer($event)"
				(playerHiddenChanged)="dataService.togglePlayerHidden($event)"
				[color]="homeColor()"
				(dismiss)="addHomePlayerModal.dismiss()"
			></app-add-player>
		</ng-template>
	</ion-modal>
	<ion-modal trigger="addAwayPlayer" #addAwayPlayerModal [backdropDismiss]="false">
		<ng-template>
			<app-add-player
				[teamId]="game.awayTeam.teamId"
				[isMale]="game.awayTeam.isMale"
				[players]="dataService.players()"
				[stats]="dataService.stats()"
				(playerAdded)="dataService.addPlayer($event)"
				(playerHiddenChanged)="dataService.togglePlayerHidden($event)"
				[color]="awayColor()"
				(dismiss)="addAwayPlayerModal.dismiss()"
			></app-add-player>
		</ng-template>
	</ion-modal>
	<ion-modal class="edit-points-modal" trigger="editHomePeriod" [backdropDismiss]="false">
		<ng-template>
			<ion-content [scrollY]="false">
				<app-edit-period-total
					team="home"
					[color]="homeColor()"
					[game]="game"
					(update)="dataService.changePeriodTotals($event)"
				></app-edit-period-total>
			</ion-content>
		</ng-template>
	</ion-modal>
	<ion-modal class="edit-points-modal" trigger="editAwayPeriod" [backdropDismiss]="false">
		<ng-template>
			<ion-content [scrollY]="false">
				<app-edit-period-total
					team="away"
					[color]="awayColor()"
					[game]="game"
					(update)="dataService.changePeriodTotals($event)"
				></app-edit-period-total>
			</ion-content>
		</ng-template>
	</ion-modal>
	<ion-popover [showBackdrop]="false" trigger="color-trigger" triggerAction="click">
		<ng-template>
			<ion-grid>
				<ion-row>
					<ion-col>
						<ion-radio-group style="display: flex; justify-content: space-around;" [(ngModel)]="colorTeam">
							<ion-radio value="home" labelPlacement="end">Home</ion-radio>
							<ion-radio value="away" labelPlacement="end">Away</ion-radio>
						</ion-radio-group>
					</ion-col>
				</ion-row>
				<ion-row>
					<ion-col>
						<ion-button (click)="changeColor('blue')" id="blue" color="blue" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="blue"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('pink')" color="pink" id="pink" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="pink"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('purple')" color="purple" id="purple" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="purple"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('orange')" color="orange" id="orange" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="orange"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('grey')" color="grey" id="grey" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="grey"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('navy')" color="navy" id="navy" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="navy"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('coral')" color="coral" id="coral" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="coral"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('lilac')" color="lilac" id="lilac" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="lilac"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('green')" color="green" id="green" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="green"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('red')" color="red" id="red" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="red"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('gold')" color="gold" id="gold" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="gold"></ion-icon>
						</ion-button>
						<ion-button (click)="changeColor('teal')" color="teal" id="teal" fill="clear">
							<ion-icon slot="icon-only" name="basketball" color="teal"></ion-icon>
						</ion-button>
					</ion-col>
				</ion-row>
			</ion-grid>
		</ng-template>
	</ion-popover>
}

